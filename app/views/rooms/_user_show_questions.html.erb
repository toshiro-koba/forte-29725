<div class="content">

<%# ここから！ ゲームタグ！ %>
  <div class="index">
    <div class="index__game_tag">
      <% unless question.game_tags[0] == nil %>
        <%= question.game_tags[0].game_title %>
      <% else %>
        <%= "test_tag" %>
      <% end %>
    </div>
    <div class="index__triangle"></div>
  </div>
<%# ここまで！ ゲームタグ！ %>

  <div class="room-name">
    <div class="question-title">
      <%= question.question_title %>
    </div>

    <div class="question-space">

      <div class="panel"> <%# ↓モーダルに関する記述の始まり%>

          <div class="c-btn js-open-modal"> <%# ↓モーダル画面を表示する判定の始まり%>

            <div class="question-lists">
              <div class="icons-space">
              <%= link_to user_path(question.messages[0].user) do %>
                <% unless question.messages[0].user.profile == nil %>
                  <% if question.messages[0].user.profile.image? %>
                    <%= image_tag(question.messages[0].user.profile.image.thumb50.url, class: "question-user-icon")%>
                  <% end %>
                <% else %>
                  <%= image_tag "question_user_icon.png", class:"question-user-icon" %>
                <% end %>
              <% end %>
              </div>
              <div class="question-message-set">
                <div class="question-user-nickname">
                  <%= question.messages[0].user.nickname %>
                </div>
                <div class="question-sentence">
                  <div class="question-sentence-Q">
                    <%= "Q." %>
                  </div>
                  <div class="question-sentence-message">
                    <%= safe_join("#{question.messages[0].content}".split("\n"),tag(:br))%>
                  </div>
                </div>
              </div>
            </div>

            <div class="question-lists">
              <div class="icons-space">
                <% if question.messages.size == 1 %>
                  <%= link_to user_path(question.entries[0].user) do %>
                    <% unless question.entries[0].user.profile == nil %>
                      <% if question.entries[0].user.profile.image? %>
                        <%= image_tag(question.entries[0].user.profile.image.thumb50.url, class: "question-user-icon")%>
                      <% end %>
                    <% else %>
                      <%= image_tag "answer_user_icon.png", class:"answer-user-icon" %>
                    <% end %>
                  <% end %>
                <% else %>
                  <%= link_to user_path(question.messages[1].user) do %>
                    <% unless question.messages[1].user.profile == nil %>
                      <% if question.messages[1].user.profile.image? %>
                        <%= image_tag(question.messages[1].user.profile.image.thumb50.url, class: "question-user-icon")%>
                      <% end %>
                    <% else %>
                      <%= image_tag "answer_user_icon.png", class:"answer-user-icon" %>
                    <% end %>
                  <% end %>
                <% end %>
              </div>

              <% if question.messages.size == 1 %>
                <div class="question-message-set">
                  <div class="question-user-nickname">
                    <%= question.entries[0].user.nickname %>
                  </div>

                  <div class="question-sentence">
                    <div class="question-sentence-A">
                      <%= "A." %>
                    </div>
                    <div class="question-sentence-message">
                      <span class="no-answer-text"><%= "まだ回答はありません" %></span>
                    </div>
                  </div>
                </div>
              <% else %>
                <div class="question-message-set">
                  <div class="question-user-nickname">
                    <%= question.messages[1].user.nickname %>
                  </div>

                  <div class="question-sentence">
                    <div class="question-sentence-A">
                      <%= "A." %>
                    </div>
                    <div class="question-sentence-message">
                      <%= safe_join("#{question.messages[1].content}".split("\n"),tag(:br))%>
                    </div>
                  </div>
                </div>
              <% end %>
            </div>

          </div> <%# ↑モーダル画面を表示する判定の終わり%>

          <div class="modal-panel-back disable"> <%# ↓隠れているモーダル画面の始まり%>
            <div class="modal-panel">

              <div class="index">
                <div class="index__game_tag">
                  <% unless question.game_tags[0] == nil %>
                    <%= question.game_tags[0].game_title %>
                  <% else %>
                    <%= "test_tag" %>
                  <% end %>
                </div>
                <div class="index__triangle"></div>
              </div>
              <div class="question-title">
                <%= question.question_title %>
              </div>

              <div class="question-lists">
                <div class="icons-space">
                <%= link_to user_path(question.messages[0].user) do %>
                  <% unless question.messages[0].user.profile == nil %>
                    <% if question.messages[0].user.profile.image? %>
                      <%= image_tag(question.messages[0].user.profile.image.thumb50.url, class: "question-user-icon")%>
                    <% end %>
                  <% else %>
                    <%= image_tag "question_user_icon.png", class:"question-user-icon" %>
                  <% end %>
                <% end %>
                </div>
                <div class="question-message-set">
                  <div class="question-user-nickname">
                    <%= question.messages[0].user.nickname %>
                  </div>
                  <div class="question-sentence">
                    <div class="question-sentence-Q">
                      <%= "Q." %>
                    </div>
                    <div class="question-sentence-message">
                      <%= safe_join("#{question.messages[0].content}".split("\n"),tag(:br))%>
                    </div>
                  </div>
                </div>
              </div>

              <div class="question-lists">
                <div class="icons-space">
                  <% if question.messages.size == 1 %>
                    <%= link_to user_path(question.entries[0].user) do %>
                      <% unless question.entries[0].user.profile == nil %>
                        <% if question.entries[0].user.profile.image? %>
                          <%= image_tag(question.entries[0].user.profile.image.thumb50.url, class: "question-user-icon")%>
                        <% end %>
                      <% else %>
                        <%= image_tag "answer_user_icon.png", class:"answer-user-icon" %>
                      <% end %>
                    <% end %>
                  <% else %>
                    <%= link_to user_path(question.messages[1].user) do %>
                      <% unless question.messages[1].user.profile == nil %>
                        <% if question.messages[1].user.profile.image? %>
                          <%= image_tag(question.messages[1].user.profile.image.thumb50.url, class: "question-user-icon")%>
                        <% end %>
                      <% else %>
                        <%= image_tag "answer_user_icon.png", class:"answer-user-icon" %>
                      <% end %>
                    <% end %>
                  <% end %>
                </div>

                <% if question.messages.size == 1 %>
                  <div class="question-message-set">
                    <div class="question-user-nickname">
                      <%= question.entries[0].user.nickname %>
                    </div>

                    <div class="question-sentence">
                      <div class="question-sentence-A">
                        <%= "A." %>
                      </div>
                      <div class="question-sentence-message">
                        <span class="no-answer-text"><%= "まだ回答はありません" %></span>
                      </div>
                    </div>
                  </div>
                <% else %>
                  <div class="question-message-set">
                    <div class="question-user-nickname">
                      <%= question.messages[1].user.nickname %>
                    </div>

                    <div class="question-sentence">
                      <div class="question-sentence-A">
                        <%= "A." %>
                      </div>
                      <div class="question-sentence-message">
                        <%= safe_join("#{question.messages[1].content}".split("\n"),tag(:br))%>
                      </div>
                    </div>
                  </div>
                <% end %>
              </div>

            </div>
          </div> <%# ↑隠れているモーダル画面の終わり%>

        </div> <%# ↑モーダルに関する記述の終わり%>

      <div class="question-option__space">
        <div class="like">
          <div id="like-btn-<%= question.id %>">
            <%= render partial: "likes/like", locals: { room: question } %>
          </div>
        </div>
        <%= link_to room_path(question), method: :delete , class: "question-delete-btn" do %>
          <i class="fas fa-trash"></i>
        <% end %>
      </div>

    </div>
  </div>
</div>